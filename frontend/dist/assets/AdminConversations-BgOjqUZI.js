import{c as m,G as u,a as o,b as e,F as f,j as _,t as l,e as b,f as h,w as y,h as g,i as v,R as k,k as a}from"./index-17v5VSGm.js";const w={class:"tile rounded-2xl bg-white p-6"},N={key:0,class:"rounded-2xl border border-dashed border-slate-200 p-8 text-center text-sm text-slate-500"},M={key:1,class:"overflow-hidden rounded-2xl border border-slate-200"},C={class:"w-full text-left text-sm"},D={class:"divide-y divide-slate-100"},j={class:"px-4 py-3"},A={class:"font-semibold text-slate-900"},T={class:"text-xs text-slate-500"},V={class:"px-4 py-3 text-slate-700"},B={key:0},L={key:1,class:"text-slate-400"},$={key:2,class:"ml-2 rounded-full bg-amber-100 px-2 py-0.5 text-[11px] font-semibold uppercase text-amber-700"},F={class:"px-4 py-3 text-slate-500"},J={class:"px-4 py-3 text-right"},q={__name:"AdminConversations",setup(R){const r=u("adminDashboard"),d=m(()=>{var n;return((n=r==null?void 0:r.value)==null?void 0:n.conversations)||[]});function p(n){if(!n)return"—";const s=new Date(n);if(Number.isNaN(s.getTime()))return"—";const t=Date.now()-s.getTime(),i=Math.floor(t/(1e3*60*60*24));if(i>=1)return`${i}d ago`;const c=Math.floor(t/(1e3*60*60));if(c>=1)return`${c}h ago`;const x=Math.floor(t/(1e3*60));return x>=1?`${x}m ago`:"Just now"}return(n,s)=>(a(),o("div",w,[s[2]||(s[2]=e("header",{class:"mb-4"},[e("h2",{class:"text-xl font-semibold text-slate-900"},"Conversations"),e("p",{class:"text-sm text-slate-600"},"Monitor recent activity across all message threads.")],-1)),d.value.length?(a(),o("div",M,[e("table",C,[s[1]||(s[1]=e("thead",{class:"bg-slate-50 text-xs uppercase text-slate-500"},[e("tr",null,[e("th",{class:"px-4 py-3 font-semibold"},"Thread"),e("th",{class:"px-4 py-3 font-semibold"},"Last message"),e("th",{class:"px-4 py-3 font-semibold"},"Age"),e("th",{class:"px-4 py-3 font-semibold text-right"},"Actions")])],-1)),e("tbody",D,[(a(!0),o(f,null,_(d.value,t=>(a(),o("tr",{key:t.id,class:"bg-white"},[e("td",j,[e("div",A,l(t.subject||"New Conversation"),1),e("div",T," Job "+l(t.job_reference||"—"),1)]),e("td",V,[t.last_message?(a(),o("span",B,l(t.last_message),1)):(a(),o("span",L," No messages yet. ")),t.is_stale?(a(),o("span",$," Stale ")):b("",!0)]),e("td",F,l(p(t.updated_at)),1),e("td",J,[h(v(k),{to:{name:"messages",query:{thread:t.id}},class:"rounded-full border border-emerald-200 px-3 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-50"},{default:y(()=>[...s[0]||(s[0]=[g(" Open ",-1)])]),_:1},8,["to"])])]))),128))])])])):(a(),o("div",N," No conversations yet. "))]))}};export{q as default};
