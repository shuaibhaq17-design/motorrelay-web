import{u as c,q as v,r as m,a,b as t,g,s as n,v as i,z as w,t as y,m as k,h as p,e as S,w as V,i as h,R as D,p as M,k as d,x as R}from"./index-CbeUM-tk.js";const q={class:"mx-auto max-w-md space-y-6 rounded-2xl border bg-white p-6"},C={key:0,class:"text-sm text-red-600"},N=["disabled"],U={key:0},B={key:1},T={class:"text-sm text-slate-600"},E={__name:"SignupView",setup(j){const x=M(),f=c(),l=v({name:"",email:"",password:"",role:"driver"}),o=m(!1),r=m("");async function b(){var u,e;o.value=!0,r.value="";try{const{data:s}=await R.post("/auth/register",l);f.setSession({token:(s==null?void 0:s.token)||null,user:(s==null?void 0:s.user)||null,plan:(s==null?void 0:s.plan)||null}),x.push("/onboarding")}catch(s){console.error("Signup failed",s),r.value=((e=(u=s.response)==null?void 0:u.data)==null?void 0:e.message)||"Sign up failed. Try again later."}finally{o.value=!1}}return(u,e)=>(d(),a("div",q,[e[11]||(e[11]=t("header",null,[t("h1",{class:"text-2xl font-bold text-slate-900"},"Create your MotorRelay account"),t("p",{class:"text-sm text-slate-600"},"Drivers and dealers join to post, accept and track jobs.")],-1)),t("form",{class:"space-y-4",onSubmit:k(b,["prevent"])},[t("div",null,[e[4]||(e[4]=t("label",{class:"text-sm font-semibold text-slate-700"},"Full name",-1)),n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.name=s),type:"text",required:"",class:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200"},null,512),[[i,l.name]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"text-sm font-semibold text-slate-700"},"Email",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.email=s),type:"email",required:"",class:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200"},null,512),[[i,l.email]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm font-semibold text-slate-700"},"Password",-1)),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.password=s),type:"password",minlength:"8",required:"",class:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200"},null,512),[[i,l.password]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-semibold text-slate-700"},"Role",-1)),n(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.role=s),class:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200"},[...e[7]||(e[7]=[t("option",{value:"driver"},"Driver",-1),t("option",{value:"dealer"},"Dealer",-1)])],512),[[w,l.role]])]),r.value?(d(),a("p",C,y(r.value),1)):g("",!0),t("button",{type:"submit",class:"w-full rounded-xl bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",disabled:o.value},[o.value?(d(),a("span",U,"Creating accountâ€¦")):(d(),a("span",B,"Sign up"))],8,N)],32),t("p",T,[e[10]||(e[10]=p(" Already have an account? ",-1)),S(h(D),{to:"/login",class:"font-semibold text-emerald-600 hover:underline"},{default:V(()=>[...e[9]||(e[9]=[p(" Log in ",-1)])]),_:1})])]))}};export{E as default};
