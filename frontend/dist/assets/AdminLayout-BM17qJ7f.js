import{y as v,l as g,c,z as y,D as u,o as _,q as w,s as k,a as l,b as t,f as C,w as D,h as R,i as x,R as A,F as B,j as L,n as V,t as f,g as F,E as T,k as n}from"./index-17v5VSGm.js";async function U(){const{data:b}=await v.get("/admin/dashboard");return b}const j={class:"space-y-6"},q={class:"tile rounded-2xl p-6"},z={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},E={class:"mt-6 flex flex-wrap gap-2"},M=["onClick"],N={class:"space-y-4"},O={key:0,class:"rounded-2xl border border-red-100 bg-red-50 p-4 text-sm text-red-700"},P={class:"mt-1"},S={key:1,class:"rounded-2xl border border-slate-200 bg-white p-6 text-sm text-slate-500"},G={__name:"AdminLayout",setup(b){const d=w(),p=y(),i=[{name:"admin-overview",label:"Overview"},{name:"admin-applications",label:"Applications"},{name:"admin-conversations",label:"Conversations"},{name:"admin-account-requests",label:"Account Updates"},{name:"admin-plans",label:"Plans & Billing"},{name:"admin-system-health",label:"System Health"},{name:"admin-content",label:"Content"}],e=g({data:null,loading:!1,error:""}),r=c(()=>p.name||"admin-overview");async function m(){var o,a;e.loading=!0,e.error="";try{const s=await U();e.data=s||{}}catch(s){console.error("Failed to load admin dashboard",s),e.error=((a=(o=s.response)==null?void 0:o.data)==null?void 0:a.message)||"Unable to load admin data."}finally{e.loading=!1}}function h(o){o!==r.value&&d.push({name:o})}return u("adminDashboard",c(()=>e.data||{})),u("adminDashboardLoading",c(()=>e.loading)),u("refreshAdminDashboard",m),_(async()=>{await m(),i.some(o=>o.name===r.value)||d.replace({name:"admin-overview"})}),k(()=>p.name,o=>{i.some(a=>a.name===o)||d.replace({name:"admin-overview"})}),(o,a)=>(n(),l("div",j,[t("section",q,[t("div",z,[a[1]||(a[1]=t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900"},"Admin Portal"),t("p",{class:"text-sm text-slate-600"}," Operational control centre for MotorRelay. ")],-1)),C(x(A),{to:"/",class:"inline-flex items-center gap-2 rounded-xl border border-slate-200 px-4 py-2 text-sm font-semibold text-emerald-600 hover:bg-emerald-50"},{default:D(()=>[...a[0]||(a[0]=[R(" Back to site ",-1)])]),_:1})]),t("nav",E,[(n(),l(B,null,L(i,s=>t("button",{key:s.name,type:"button",class:V(["rounded-full px-4 py-2 text-sm font-semibold transition",s.name===r.value?"bg-emerald-500 text-white shadow":"bg-white text-emerald-700 border border-emerald-100 hover:bg-emerald-50"]),onClick:H=>h(s.name)},f(s.label),11,M)),64))])]),t("section",N,[e.error?(n(),l("div",O,[a[2]||(a[2]=t("div",{class:"font-semibold"},"Unable to load admin data",-1)),t("p",P,f(e.error),1),t("button",{type:"button",class:"mt-3 rounded-lg bg-red-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-red-700",onClick:m}," Retry ")])):e.loading&&!e.data?(n(),l("div",S," Loading admin insights... ")):(n(),F(x(T),{key:r.value}))])]))}};export{G as default};
