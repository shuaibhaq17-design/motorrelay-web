import{u as b,q as g,r as u,a as r,b as t,g as w,s as d,v as m,t as y,m as v,h as p,e as h,w as k,i as V,R as _,p as S,k as n,x as L}from"./index-CbeUM-tk.js";const M={class:"mx-auto max-w-md space-y-6 rounded-2xl border bg-white p-6"},N={key:0,class:"text-sm text-red-600"},R=["disabled"],C={key:0},q={key:1},B={class:"text-sm text-slate-600"},E={__name:"LoginView",setup(A){const c=S(),x=b(),o=g({email:"",password:""}),l=u(!1),a=u("");async function f(){var i,e;l.value=!0,a.value="";try{const{data:s}=await L.post("/auth/login",o);x.setSession({token:(s==null?void 0:s.token)||null,user:(s==null?void 0:s.user)||null,plan:(s==null?void 0:s.plan)||null}),c.push("/")}catch(s){console.error("Login failed",s),a.value=((e=(i=s.response)==null?void 0:i.data)==null?void 0:e.message)||"Login failed. Check your credentials."}finally{l.value=!1}}return(i,e)=>(n(),r("div",M,[e[6]||(e[6]=t("header",null,[t("h1",{class:"text-2xl font-bold text-slate-900"},"Log in"),t("p",{class:"text-sm text-slate-600"}," Access your MotorRelay account to manage jobs and messaging. ")],-1)),t("form",{class:"space-y-4",onSubmit:v(f,["prevent"])},[t("div",null,[e[2]||(e[2]=t("label",{class:"text-sm font-semibold text-slate-700"},"Email",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.email=s),type:"email",required:"",class:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200"},null,512),[[m,o.email]])]),t("div",null,[e[3]||(e[3]=t("label",{class:"text-sm font-semibold text-slate-700"},"Password",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s),type:"password",required:"",class:"mt-1 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200"},null,512),[[m,o.password]])]),a.value?(n(),r("p",N,y(a.value),1)):w("",!0),t("button",{type:"submit",class:"w-full rounded-xl bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",disabled:l.value},[l.value?(n(),r("span",C,"Signing inâ€¦")):(n(),r("span",q,"Sign in"))],8,R)],32),t("p",B,[e[5]||(e[5]=p(" New to MotorRelay? ",-1)),h(V(_),{to:"/signup",class:"font-semibold text-emerald-600 hover:underline"},{default:k(()=>[...e[4]||(e[4]=[p(" Create your account ",-1)])]),_:1})])]))}};export{E as default};
