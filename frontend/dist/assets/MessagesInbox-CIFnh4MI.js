import{u as m,r as d,o as v,a as t,b as e,g as x,t as r,F as g,j as p,x as h,k as a}from"./index-CbeUM-tk.js";const f={class:"space-y-4"},y={key:0,class:"rounded-2xl border bg-white p-4 text-sm text-slate-600"},b={key:1,class:"space-y-3"},k={key:0,class:"text-sm text-amber-600"},w={class:"space-y-2"},M={class:"flex items-center justify-between"},S={class:"text-sm font-semibold text-slate-900"},L={class:"text-xs text-slate-500"},j={class:"text-sm text-slate-600"},D={__name:"MessagesInbox",setup(A){const n=m(),c=d([]),i=d(!1),o=d("");async function u(){if(!n.token){o.value="Log in to view messages.",c.value=[];return}i.value=!0,o.value="";try{const{data:s}=await h.get("/messages");c.value=Array.isArray(s==null?void 0:s.data)?s.data:[]}catch(s){console.error("Failed to load messages",s),o.value="Unable to load conversations. Showing placeholders.",c.value=[{id:"demo-convo",subject:"Demo conversation",last_message:"Welcome to the new inbox.",updated_at:new Date().toISOString()}]}finally{i.value=!1}}return v(()=>{!n.user&&n.token?n.fetchMe().finally(u):u()}),(s,_)=>(a(),t("div",f,[_[0]||(_[0]=e("header",{class:"space-y-1"},[e("h1",{class:"text-2xl font-bold text-slate-900"},"Messages"),e("p",{class:"text-sm text-slate-600"}," Chat with dealerships and drivers. Conversations sync via the Laravel API. ")],-1)),i.value?(a(),t("div",y," Loading messages… ")):(a(),t("div",b,[o.value?(a(),t("p",k,r(o.value),1)):x("",!0),e("ol",w,[(a(!0),t(g,null,p(c.value,l=>(a(),t("li",{key:l.id,class:"tile flex flex-col gap-1 p-4"},[e("div",M,[e("h2",S,r(l.subject||"Conversation"),1),e("time",L,r(l.updated_at?new Date(l.updated_at).toLocaleString():"—"),1)]),e("p",j,r(l.last_message||"No messages yet."),1)]))),128))])]))]))}};export{D as default};
