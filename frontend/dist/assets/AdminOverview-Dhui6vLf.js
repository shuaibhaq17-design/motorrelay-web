import{c as n,G as y,a as o,b as e,F as u,j as b,t as s,e as h,h as w,i as N,k as d}from"./index-17v5VSGm.js";const B={class:"space-y-6"},F={class:"grid gap-4 md:grid-cols-3"},V={class:"text-sm font-semibold text-slate-600"},C={class:"mt-2 text-3xl font-bold text-slate-900"},G={class:"mt-1 text-xs text-emerald-600"},P={class:"grid gap-4 lg:grid-cols-2"},J={class:"tile rounded-2xl bg-white p-4"},L={class:"mb-3 flex items-center justify-between"},R={key:0,class:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs text-emerald-700"},T={class:"space-y-4"},E={class:"flex items-center gap-3"},I={class:"text-base font-semibold text-slate-900"},M={class:"rounded-full bg-emerald-100 px-3 py-0.5 text-xs font-semibold uppercase tracking-wide text-emerald-700"},O={class:"sm:w-2/3 lg:w-3/4"},Q={key:0,class:"rounded-xl border border-dashed border-slate-200 bg-white/60 px-4 py-3 text-sm text-slate-500"},S={key:1,class:"space-y-3 text-sm text-slate-600"},U={class:"flex flex-wrap items-center justify-between gap-2"},q={class:"font-semibold text-slate-800"},z={class:"text-xs font-semibold uppercase tracking-wide text-slate-400"},H={key:0,class:"mt-1 text-xs text-slate-500"},K={class:"tile rounded-2xl bg-white p-4"},W={class:"mb-3 flex items-center justify-between"},X={key:0,class:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs text-emerald-700"},Y={key:0,class:"rounded-xl border border-dashed border-slate-200 p-6 text-sm text-slate-500"},Z={key:1,class:"overflow-hidden rounded-2xl border border-slate-200"},$={class:"w-full text-left text-sm"},ee={class:"divide-y divide-slate-100"},te={class:"px-4 py-3 font-medium text-slate-900"},se={class:"px-4 py-3 text-slate-700"},le={class:"px-4 py-3 text-slate-700"},oe={class:"px-4 py-3 font-semibold text-emerald-700"},de={class:"tile rounded-2xl bg-white p-4"},ae={class:"grid gap-3 md:grid-cols-4"},ie={class:"rounded-2xl border border-slate-200 bg-slate-50 p-3"},re={class:"mt-2 text-2xl font-bold text-slate-900"},ne={class:"text-[11px] text-slate-400"},ce={class:"rounded-2xl border border-slate-200 bg-slate-50 p-3"},pe={class:"mt-2 text-2xl font-bold text-slate-900"},xe={class:"text-[11px] text-slate-400"},ve={class:"rounded-2xl border border-slate-200 bg-slate-50 p-3"},ue={class:"mt-2 text-2xl font-bold text-slate-900"},be={class:"text-[11px] text-slate-400"},_e={class:"rounded-2xl border border-slate-200 bg-slate-50 p-3"},me={class:"mt-2 text-2xl font-bold text-slate-900"},he={class:"text-[11px] text-slate-400"},ye={__name:"AdminOverview",setup(ge){const _=y("adminDashboard"),m=y("adminDashboardLoading"),p=n(()=>{var a;return((a=_==null?void 0:_.value)==null?void 0:a.overview)||{}}),k=n(()=>{var t,l,r,i,g,f;const a=p.value.stats||{};return[{key:"active_jobs",label:"Active jobs",value:((t=a.active_jobs)==null?void 0:t.value)??0,subtitle:((l=a.active_jobs)==null?void 0:l.subtitle)||""},{key:"completed_jobs",label:"Jobs completed",value:((r=a.completed_jobs)==null?void 0:r.value)??0,subtitle:((i=a.completed_jobs)==null?void 0:i.subtitle)||""},{key:"memberships",label:"Memberships",value:((g=a.memberships)==null?void 0:g.value)??0,subtitle:((f=a.memberships)==null?void 0:f.subtitle)||""}]}),j=n(()=>p.value.pipeline||[]),x=n(()=>p.value.leaderboard||[]),c=n(()=>p.value.verification||{}),D=new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}),A=n(()=>m&&typeof m.value<"u"?m.value:!1),v=n(()=>{const a=c.value||{},t=a.dealers_pending??0,l=a.dealers_approved??0,r=a.drivers_pending??0,i=a.drivers_approved??0;return{dealers:t+l,drivers:r+i}});return(a,t)=>(d(),o("div",B,[e("div",F,[(d(!0),o(u,null,b(k.value,l=>(d(),o("div",{key:l.key,class:"tile rounded-2xl bg-white p-4"},[e("div",V,s(l.label),1),e("div",C,s(l.value),1),e("div",G,s(l.subtitle),1)]))),128))]),e("div",P,[e("section",J,[e("header",L,[t[0]||(t[0]=e("div",null,[e("h2",{class:"text-lg font-semibold text-slate-900"},"Job pipeline"),e("p",{class:"text-xs text-slate-500"},"Quick glance at workflow status.")],-1)),A.value?(d(),o("span",R," Updating... ")):h("",!0)]),e("div",T,[(d(!0),o(u,null,b(j.value,l=>{var r;return d(),o("div",{key:l.status,class:"flex flex-col gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-5 sm:flex-row sm:items-start sm:justify-between"},[e("header",E,[e("div",I,s(l.label),1),e("span",M,s(l.count)+" "+s(l.count===1?"job":"jobs"),1)]),e("div",O,[(r=l.jobs)!=null&&r.length?(d(),o("ol",S,[(d(!0),o(u,null,b(l.jobs,i=>(d(),o("li",{key:i.id,class:"rounded-xl border border-slate-200 bg-white px-4 py-3 shadow-sm"},[e("div",U,[e("span",q,s(i.reference),1),e("span",z,[w(s(i.pickup_postcode||"N/A")+" ",1),t[1]||(t[1]=e("span",{"aria-hidden":"true"},"â†’",-1)),w(" "+s(i.dropoff_postcode||"N/A"),1)])]),i.title?(d(),o("p",H,s(i.title),1)):h("",!0)]))),128))])):(d(),o("p",Q," No jobs currently in this step. "))])])}),128))])]),e("section",K,[e("header",W,[t[2]||(t[2]=e("div",null,[e("h2",{class:"text-lg font-semibold text-slate-900"},"Driver leaderboard"),e("p",{class:"text-xs text-slate-500"},"Based on assigned jobs.")],-1)),x.value.length?(d(),o("span",X,s(x.value.length)+" drivers ",1)):h("",!0)]),x.value.length?(d(),o("div",Z,[e("table",$,[t[3]||(t[3]=e("thead",{class:"bg-slate-50 text-xs uppercase text-slate-500"},[e("tr",null,[e("th",{class:"px-4 py-3 font-semibold"},"Driver"),e("th",{class:"px-4 py-3 font-semibold"},"Completed"),e("th",{class:"px-4 py-3 font-semibold"},"Active"),e("th",{class:"px-4 py-3 font-semibold"},"Revenue")])],-1)),e("tbody",ee,[(d(!0),o(u,null,b(x.value,l=>(d(),o("tr",{key:l.driver,class:"bg-white"},[e("td",te,s(l.driver),1),e("td",se,s(l.completed),1),e("td",le,s(l.active),1),e("td",oe,s(N(D).format(l.revenue||0)),1)]))),128))])])])):(d(),o("div",Y," No driver assignments yet. "))])]),e("section",de,[t[8]||(t[8]=e("header",{class:"mb-3"},[e("h2",{class:"text-lg font-semibold text-slate-900"},"Verification backlog"),e("p",{class:"text-xs text-slate-500"},"Applications awaiting a decision.")],-1)),e("div",ae,[e("div",ie,[t[4]||(t[4]=e("div",{class:"text-xs font-semibold uppercase text-slate-500"},"Dealers pending",-1)),e("div",re,s(c.value.dealers_pending??0),1),e("div",ne,s(v.value.dealers)+" total",1)]),e("div",ce,[t[5]||(t[5]=e("div",{class:"text-xs font-semibold uppercase text-slate-500"},"Dealers approved",-1)),e("div",pe,s(c.value.dealers_approved??0),1),e("div",xe,s(v.value.dealers)+" total",1)]),e("div",ve,[t[6]||(t[6]=e("div",{class:"text-xs font-semibold uppercase text-slate-500"},"Drivers pending",-1)),e("div",ue,s(c.value.drivers_pending??0),1),e("div",be,s(v.value.drivers)+" total",1)]),e("div",_e,[t[7]||(t[7]=e("div",{class:"text-xs font-semibold uppercase text-slate-500"},"Drivers approved",-1)),e("div",me,s(c.value.drivers_approved??0),1),e("div",he,s(v.value.drivers)+" total",1)])])])]))}};export{ye as default};
